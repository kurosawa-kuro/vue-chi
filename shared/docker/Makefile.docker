# Makefile.docker - å…±é€šDockeræ“ä½œ

DOCKER_COMPOSE_FILE := $(SHARED_DIR)/docker/docker-compose.yml

.PHONY: docker docker-bg docker-down docker-frontend docker-backend docker-logs docker-ps docker-clean

docker:
	@echo "ğŸ³ Docker Composeã§å…¨ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•ä¸­..."
	docker compose -f $(DOCKER_COMPOSE_FILE) up --build

docker-bg:
	@echo "ğŸ³ Docker Composeã§ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰èµ·å‹•ä¸­..."
	docker compose -f $(DOCKER_COMPOSE_FILE) up -d --build

docker-down:
	@echo "ğŸ³ Docker Composeã§åœæ­¢ä¸­..."
	docker compose -f $(DOCKER_COMPOSE_FILE) down

docker-frontend:
	@echo "ğŸ¨ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚³ãƒ³ãƒ†ãƒŠã®ã¿èµ·å‹•ä¸­..."
	docker compose -f $(DOCKER_COMPOSE_FILE) up --build frontend

docker-backend:
	@echo "âš™ï¸  ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚³ãƒ³ãƒ†ãƒŠã®ã¿èµ·å‹•ä¸­..."
	docker compose -f $(DOCKER_COMPOSE_FILE) up --build backend db

docker-logs:
	@echo "ğŸ“‹ Docker Composeã®ãƒ­ã‚°ã‚’è¡¨ç¤ºä¸­..."
	docker compose -f $(DOCKER_COMPOSE_FILE) logs -f

docker-ps:
	@echo "ğŸ“Š å®Ÿè¡Œä¸­ã®ã‚³ãƒ³ãƒ†ãƒŠä¸€è¦§..."
	docker compose -f $(DOCKER_COMPOSE_FILE) ps

docker-clean:
	@echo "ğŸ§¹ Dockerã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ä¸­..."
	docker compose -f $(DOCKER_COMPOSE_FILE) down -v --remove-orphans
	docker system prune -f